# CC-Admin Vue3 å›½é™…åŒ–è§„èŒƒ

CC-Admin ä¸­æ‰€æœ‰çš„å›½é™…åŒ–é…ç½®éƒ½åœ¨ `src/locales` ç›®å½•ä¸­å®Œæˆå®šä¹‰ï¼Œä¸»è¦åˆ†ä¸ºï¼šç±»å‹å®šä¹‰ã€è¯­è¨€é…ç½®å’Œç»„ä»¶ä½¿ç”¨ã€‚

## ğŸ—ï¸ å›½é™…åŒ–æ¶æ„

### ç›®å½•ç»“æ„

```
src/locales/
â”œâ”€â”€ index.ts               # å›½é™…åŒ–é…ç½®å…¥å£
â”œâ”€â”€ types.ts               # å›½é™…åŒ–ç±»å‹å®šä¹‰
â”œâ”€â”€ modules/               # æŒ‰æ¨¡å—ç»„ç»‡çš„è¯­è¨€æ–‡ä»¶
â”‚   â”œâ”€â”€ common.ts          # é€šç”¨è¯­è¨€é…ç½®
â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯æ¨¡å—è¯­è¨€é…ç½®
â”‚   â”œâ”€â”€ user.ts            # ç”¨æˆ·æ¨¡å—è¯­è¨€é…ç½®
â”‚   â”œâ”€â”€ dashboard.ts       # ä»ªè¡¨ç›˜æ¨¡å—è¯­è¨€é…ç½®
â”‚   â””â”€â”€ router.ts          # è·¯ç”±æ¨¡å—è¯­è¨€é…ç½®
â””â”€â”€ lang/                  # æŒ‰è¯­è¨€ç»„ç»‡çš„å®Œæ•´é…ç½®
    â”œâ”€â”€ zh-CN.ts           # ç®€ä½“ä¸­æ–‡
    â”œâ”€â”€ en-US.ts           # ç¾å¼è‹±è¯­
    â”œâ”€â”€ zh-TW.ts           # ç¹ä½“ä¸­æ–‡
    â””â”€â”€ ja-JP.ts           # æ—¥è¯­
```

### æ”¯æŒçš„è¯­è¨€

| è¯­è¨€ä»£ç  | è¯­è¨€åç§° | å›½æ—— | æ–‡å­—æ–¹å‘ | çŠ¶æ€        |
| -------- | -------- | ---- | -------- | ----------- |
| zh-CN    | ç®€ä½“ä¸­æ–‡ | ğŸ‡¨ğŸ‡³   | ltr      | âœ… å®Œæ•´æ”¯æŒ |
| en-US    | English  | ğŸ‡ºğŸ‡¸   | ltr      | âœ… å®Œæ•´æ”¯æŒ |
| zh-TW    | ç¹é«”ä¸­æ–‡ | ğŸ‡¹ğŸ‡¼   | ltr      | âœ… å®Œæ•´æ”¯æŒ |
| ja-JP    | æ—¥æœ¬èª   | ğŸ‡¯ğŸ‡µ   | ltr      | âœ… å®Œæ•´æ”¯æŒ |

## ğŸ“ ç±»å‹å®šä¹‰

### ä¸»è¦å›½é™…åŒ–ç±»å‹

```typescript
// src/locales/types.ts

// æ”¯æŒçš„è¯­è¨€ç±»å‹
export type SupportedLocale = 'zh-CN' | 'en-US' | 'zh-TW' | 'ja-JP'

// è¯­è¨€é…ç½®æ¥å£
export interface LocaleInfo {
  key: SupportedLocale
  name: string
  flag: string
  direction: 'ltr' | 'rtl'
}

// é€šç”¨è¯­è¨€é…ç½®ç»“æ„
export interface CommonLocaleMessages {
  // æ“ä½œç›¸å…³
  actions: {
    confirm: string
    cancel: string
    save: string
    delete: string
    edit: string
    add: string
    search: string
    reset: string
    submit: string
    refresh: string
    export: string
    import: string
    close: string
    back: string
    next: string
    previous: string
  }

  // çŠ¶æ€ç›¸å…³
  status: {
    loading: string
    success: string
    error: string
    warning: string
    info: string
    pending: string
    completed: string
    failed: string
    active: string
    inactive: string
  }

  // è¡¨å•ç›¸å…³
  form: {
    required: string
    invalid: string
    tooShort: string
    tooLong: string
    invalidEmail: string
    invalidPhone: string
    invalidUrl: string
    passwordMismatch: string
    pleaseSelect: string
    pleaseInput: string
  }

  // è¡¨æ ¼ç›¸å…³
  table: {
    noData: string
    total: string
    page: string
    pageSize: string
    itemsPerPage: string
    goToPage: string
    firstPage: string
    lastPage: string
    previousPage: string
    nextPage: string
  }

  // æ—¶é—´ç›¸å…³
  time: {
    now: string
    today: string
    yesterday: string
    tomorrow: string
    thisWeek: string
    thisMonth: string
    thisYear: string
    format: {
      date: string
      datetime: string
      time: string
    }
  }

  // ç³»ç»Ÿç›¸å…³
  system: {
    title: string
    description: string
    version: string
    copyright: string
    loading: string
    networkError: string
    serverError: string
    unauthorized: string
    forbidden: string
    notFound: string
  }
}

// è®¤è¯æ¨¡å—è¯­è¨€é…ç½®
export interface AuthLocaleMessages {
  login: {
    title: string
    username: string
    password: string
    rememberMe: string
    forgotPassword: string
    loginButton: string
    loginSuccess: string
    loginFailed: string
    invalidCredentials: string
    usernameRequired: string
    passwordRequired: string
  }

  logout: {
    title: string
    confirm: string
    success: string
    failed: string
  }

  register: {
    title: string
    username: string
    password: string
    confirmPassword: string
    email: string
    phone: string
    agreement: string
    registerButton: string
    registerSuccess: string
    registerFailed: string
    userExists: string
    emailExists: string
  }
}

// ç”¨æˆ·æ¨¡å—è¯­è¨€é…ç½®
export interface UserLocaleMessages {
  profile: {
    title: string
    basicInfo: string
    avatar: string
    username: string
    email: string
    phone: string
    department: string
    role: string
    lastLogin: string
    createdAt: string
    updatedAt: string
    updateSuccess: string
    updateFailed: string
  }

  management: {
    title: string
    userList: string
    addUser: string
    editUser: string
    deleteUser: string
    deleteConfirm: string
    batchDelete: string
    exportUsers: string
    importUsers: string
    userCount: string
    searchUser: string
    filterByRole: string
    filterByStatus: string
  }

  roles: {
    admin: string
    user: string
    guest: string
    moderator: string
    editor: string
    viewer: string
  }

  status: {
    active: string
    inactive: string
    banned: string
    pending: string
    suspended: string
  }
}

// ä»ªè¡¨ç›˜æ¨¡å—è¯­è¨€é…ç½®
export interface DashboardLocaleMessages {
  title: string
  welcome: string
  overview: string
  statistics: {
    totalUsers: string
    activeUsers: string
    totalOrders: string
    totalRevenue: string
    growthRate: string
    conversionRate: string
  }
  charts: {
    userGrowth: string
    revenueChart: string
    orderChart: string
    trafficChart: string
    conversionChart: string
  }
  quickActions: {
    title: string
    addUser: string
    viewOrders: string
    generateReport: string
    systemSettings: string
  }
  recentActivities: {
    title: string
    viewAll: string
    noActivities: string
  }
}

// è·¯ç”±é…ç½®æ¨¡å—è¯­è¨€é…ç½®
export interface RouterLocaleMessages {
  core: {
    login: string
  }
  dashboard: {
    dashboard: string
  }
  example: {
    example: string
    i18n: string
    unocss: string
  }
  error: {
    notFound: string
    forbidden: string
    serverError: string
  }
}

// æ ¹è¯­è¨€é…ç½®æ¥å£
export interface LocaleMessages {
  common: CommonLocaleMessages
  auth: AuthLocaleMessages
  user: UserLocaleMessages
  dashboard: DashboardLocaleMessages
  router: RouterLocaleMessages
}

// è¯­è¨€åŒ…åŠ è½½é…ç½®
export interface LocaleConfig {
  messages: Record<SupportedLocale, LocaleMessages>
  fallbackLocale: SupportedLocale
  supportedLocales: LocaleInfo[]
  defaultLocale: SupportedLocale
}
```

## ğŸŒ è¯­è¨€é…ç½®æ–‡ä»¶

### æ¨¡å—åŒ–è¯­è¨€é…ç½®

```typescript
// src/locales/modules/common.ts

/** ä¸­æ–‡é…ç½® */
export const commonZhCN: CommonLocaleMessages = {
  actions: {
    confirm: 'ç¡®è®¤',
    cancel: 'å–æ¶ˆ',
    save: 'ä¿å­˜',
    delete: 'åˆ é™¤',
    edit: 'ç¼–è¾‘',
    add: 'æ·»åŠ ',
    search: 'æœç´¢',
    reset: 'é‡ç½®',
    submit: 'æäº¤',
    refresh: 'åˆ·æ–°',
    export: 'å¯¼å‡º',
    import: 'å¯¼å…¥',
    close: 'å…³é—­',
    back: 'è¿”å›',
    next: 'ä¸‹ä¸€æ­¥',
    previous: 'ä¸Šä¸€æ­¥',
  },

  status: {
    loading: 'åŠ è½½ä¸­...',
    success: 'æ“ä½œæˆåŠŸ',
    error: 'æ“ä½œå¤±è´¥',
    warning: 'è­¦å‘Š',
    info: 'æç¤º',
    pending: 'ç­‰å¾…ä¸­',
    completed: 'å·²å®Œæˆ',
    failed: 'å¤±è´¥',
    active: 'å¯ç”¨',
    inactive: 'ç¦ç”¨',
  },

  form: {
    required: 'æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹',
    invalid: 'è¾“å…¥æ ¼å¼ä¸æ­£ç¡®',
    tooShort: 'è¾“å…¥å†…å®¹è¿‡çŸ­',
    tooLong: 'è¾“å…¥å†…å®¹è¿‡é•¿',
    invalidEmail: 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®',
    invalidPhone: 'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®',
    invalidUrl: 'ç½‘å€æ ¼å¼ä¸æ­£ç¡®',
    passwordMismatch: 'ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´',
    pleaseSelect: 'è¯·é€‰æ‹©',
    pleaseInput: 'è¯·è¾“å…¥',
  },

  table: {
    noData: 'æš‚æ— æ•°æ®',
    total: 'å…± {total} æ¡',
    page: 'ç¬¬ {page} é¡µ',
    pageSize: 'æ¯é¡µ {size} æ¡',
    itemsPerPage: 'æ¯é¡µæ¡æ•°',
    goToPage: 'è·³è½¬åˆ°',
    firstPage: 'é¦–é¡µ',
    lastPage: 'å°¾é¡µ',
    previousPage: 'ä¸Šä¸€é¡µ',
    nextPage: 'ä¸‹ä¸€é¡µ',
  },

  time: {
    now: 'åˆšåˆš',
    today: 'ä»Šå¤©',
    yesterday: 'æ˜¨å¤©',
    tomorrow: 'æ˜å¤©',
    thisWeek: 'æœ¬å‘¨',
    thisMonth: 'æœ¬æœˆ',
    thisYear: 'ä»Šå¹´',
    format: {
      date: 'YYYY-MM-DD',
      datetime: 'YYYY-MM-DD HH:mm:ss',
      time: 'HH:mm:ss',
    },
  },

  system: {
    title: 'CC-Admin',
    description: 'ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿ',
    version: 'ç‰ˆæœ¬',
    copyright: 'ç‰ˆæƒæ‰€æœ‰',
    loading: 'ç³»ç»ŸåŠ è½½ä¸­...',
    networkError: 'ç½‘ç»œè¿æ¥å¤±è´¥',
    serverError: 'æœåŠ¡å™¨é”™è¯¯',
    unauthorized: 'æœªæˆæƒè®¿é—®',
    forbidden: 'è®¿é—®è¢«æ‹’ç»',
    notFound: 'é¡µé¢ä¸å­˜åœ¨',
  },
}

/** è‹±æ–‡é…ç½® */
export const commonEnUS: CommonLocaleMessages = {
  actions: {
    confirm: 'Confirm',
    cancel: 'Cancel',
    save: 'Save',
    delete: 'Delete',
    edit: 'Edit',
    add: 'Add',
    search: 'Search',
    reset: 'Reset',
    submit: 'Submit',
    refresh: 'Refresh',
    export: 'Export',
    import: 'Import',
    close: 'Close',
    back: 'Back',
    next: 'Next',
    previous: 'Previous',
  },

  status: {
    loading: 'Loading...',
    success: 'Success',
    error: 'Error',
    warning: 'Warning',
    info: 'Info',
    pending: 'Pending',
    completed: 'Completed',
    failed: 'Failed',
    active: 'Active',
    inactive: 'Inactive',
  },

  // ... å…¶ä»–è‹±æ–‡é…ç½®
}

/** ç¹ä½“ä¸­æ–‡é…ç½® */
export const commonZhTW: CommonLocaleMessages = {
  // ... ç¹ä½“ä¸­æ–‡é…ç½®
}

/** æ—¥æ–‡é…ç½® */
export const commonJaJP: CommonLocaleMessages = {
  // ... æ—¥æ–‡é…ç½®
}
```

### å®Œæ•´è¯­è¨€åŒ…

```typescript
// src/locales/lang/zh-CN.ts
import { authZhCN } from '../modules/auth'
import { commonZhCN } from '../modules/common'
import { dashboardZhCN } from '../modules/dashboard'
import { routerZhCN } from '../modules/router'
import { userZhCN } from '../modules/user'
import type { LocaleMessages } from '../types'

export const zhCN: LocaleMessages = {
  common: commonZhCN,
  auth: authZhCN,
  user: userZhCN,
  dashboard: dashboardZhCN,
  router: routerZhCN,
}

// src/locales/lang/en-US.ts
import { authEnUS } from '../modules/auth'
import { commonEnUS } from '../modules/common'
import { dashboardEnUS } from '../modules/dashboard'
import { userEnUS } from '../modules/user'
import { routerEnUS } from '../modules/router'
import type { LocaleMessages } from '../types'

export const enUS: LocaleMessages = {
  common: commonEnUS,
  auth: authEnUS,
  user: userEnUS,
  dashboard: dashboardEnUS,
  router: routerEnUS,
}
```

## âš™ï¸ Vue3 å›½é™…åŒ–é…ç½®

### Vue I18n é…ç½®

```typescript
// src/locales/index.ts
import type { App } from 'vue'
import { createI18n } from 'vue-i18n'
import { enUS } from './lang/en-US'
import { jaJP } from './lang/ja-JP'
import { zhCN } from './lang/zh-CN'
import { zhTW } from './lang/zh-TW'
import type { LocaleInfo, LocaleMessages, SupportedLocale } from './types'

// æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
export const supportedLocales: LocaleInfo[] = [
  {
    key: 'zh-CN',
    name: 'ç®€ä½“ä¸­æ–‡',
    flag: 'ğŸ‡¨ğŸ‡³',
    direction: 'ltr',
  },
  {
    key: 'en-US',
    name: 'English',
    flag: 'ğŸ‡ºğŸ‡¸',
    direction: 'ltr',
  },
  {
    key: 'zh-TW',
    name: 'ç¹é«”ä¸­æ–‡',
    flag: 'ğŸ‡¹ğŸ‡¼',
    direction: 'ltr',
  },
  {
    key: 'ja-JP',
    name: 'æ—¥æœ¬èª',
    flag: 'ğŸ‡¯ğŸ‡µ',
    direction: 'ltr',
  },
]

// è¯­è¨€åŒ…æ˜ å°„
const messages: Record<SupportedLocale, LocaleMessages> = {
  ['zh-CN']: zhCN,
  ['en-US']: enUS,
  ['zh-TW']: zhTW,
  ['ja-JP']: jaJP,
}

// è·å–é»˜è®¤è¯­è¨€
function getDefaultLocale(): SupportedLocale {
  // 1. ä»localStorageè·å–ç”¨æˆ·è®¾ç½®
  const savedLocale = localStorage.getItem('cc-admin-locale') as SupportedLocale
  if (savedLocale && messages[savedLocale]) {
    return savedLocale
  }

  // 2. ä»æµè§ˆå™¨è¯­è¨€æ£€æµ‹
  const browserLang = navigator.language.toLowerCase()

  // ä¸­æ–‡æ£€æµ‹
  if (browserLang.includes('zh')) {
    if (browserLang.includes('tw') || browserLang.includes('hk') || browserLang.includes('hant')) {
      return 'zh-TW'
    }
    return 'zh-CN'
  }

  // æ—¥æ–‡æ£€æµ‹
  if (browserLang.includes('ja')) {
    return 'ja-JP'
  }

  // è‹±æ–‡æ£€æµ‹
  if (browserLang.includes('en')) {
    return 'en-US'
  }

  // 3. é»˜è®¤ä¸­æ–‡
  return 'zh-CN'
}

// åˆ›å»º i18n å®ä¾‹
export const i18n = createI18n({
  legacy: false,
  locale: getDefaultLocale(),
  fallbackLocale: 'zh-CN',
  messages: messages as any,
  globalInjection: true,
  silentTranslationWarn: true,
  silentFallbackWarn: true,
  missingWarn: import.meta.env.DEV,
  fallbackWarn: import.meta.env.DEV,
})

// å®‰è£…æ’ä»¶
export function setupI18n(app: App) {
  app.use(i18n)
}

// è·å–å½“å‰è¯­è¨€
export function getCurrentLocale(): SupportedLocale {
  return (i18n.global.locale as any).value
}

// è®¾ç½®è¯­è¨€
export function setLocale(locale: SupportedLocale) {
  if (messages[locale]) {
    ;(i18n.global.locale as any).value = locale
    localStorage.setItem('cc-admin-locale', locale)

    // æ›´æ–°HTML langå±æ€§
    document.documentElement.lang = locale

    // æ›´æ–°HTML dirå±æ€§
    const localeInfo = supportedLocales.find(item => item.key === locale)
    document.documentElement.dir = localeInfo?.direction || 'ltr'

    // è§¦å‘è¯­è¨€å˜æ›´äº‹ä»¶
    window.dispatchEvent(
      new CustomEvent('locale-changed', {
        detail: { locale },
      })
    )
  }
}

// è·å–ç¿»è¯‘æ–‡æœ¬
export function t(key: string, params?: Record<string, any>): string {
  return i18n.global.t(key, params || {})
}

// æ ¼å¼åŒ–æ—¥æœŸ
export function d(date: Date | number, format?: string): string {
  return format ? i18n.global.d(date, format) : i18n.global.d(date)
}

// æ ¼å¼åŒ–æ•°å­—
export function n(number: number, format?: string): string {
  return format ? i18n.global.n(number, format) : i18n.global.n(number)
}

// å¯¼å‡ºç±»å‹å’Œå·¥å…·å‡½æ•°
export { getDefaultLocale, messages }
export type { LocaleInfo, LocaleMessages, SupportedLocale }
```

### è¯­è¨€åˆ‡æ¢ Hook

```typescript
// src/hooks/modules/useLocale.ts
import { computed } from 'vue'
import { useI18n } from 'vue-i18n'
import type { SupportedLocale } from '@/locales/types'
import { supportedLocales, setLocale, getCurrentLocale } from '@/locales'

export function useLocale() {
  const { locale, t, d, n } = useI18n()

  // å½“å‰è¯­è¨€ä¿¡æ¯
  const currentLocale = computed(() => supportedLocales.find(item => item.key === locale.value))

  // æ˜¯å¦ä¸ºä¸­æ–‡
  const isChineseLang = computed(() => locale.value.startsWith('zh'))

  // æ˜¯å¦ä¸ºRTLè¯­è¨€
  const isRTL = computed(() => currentLocale.value?.direction === 'rtl')

  // åˆ‡æ¢è¯­è¨€
  const switchLocale = async (newLocale: SupportedLocale) => {
    if (locale.value === newLocale) return

    try {
      setLocale(newLocale)
    } catch (error) {
      console.error('Failed to switch locale:', error)
    }
  }

  // è·å–ç¿»è¯‘æ–‡æœ¬ï¼ˆå¸¦ç±»å‹å®‰å…¨ï¼‰
  const $t = (key: string, params?: Record<string, any>) => {
    return t(key, params)
  }

  // æ ¼å¼åŒ–æ—¥æœŸ
  const $d = (date: Date | number, format?: string) => {
    return d(date, format)
  }

  // æ ¼å¼åŒ–æ•°å­—
  const $n = (number: number, format?: string) => {
    return n(number, format)
  }

  return {
    // å“åº”å¼æ•°æ®
    locale: computed(() => getCurrentLocale()),
    currentLocale,
    isChineseLang,
    isRTL,
    supportedLocales,

    // æ–¹æ³•
    switchLocale,
    $t,
    $d,
    $n,
  }
}
```

### Pinia è¯­è¨€çŠ¶æ€ç®¡ç†

```typescript
// src/stores/modules/locale.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import type { SupportedLocale, LocaleInfo } from '@/locales/types'
import { supportedLocales, setLocale, getCurrentLocale } from '@/locales'

export const useLocaleStore = defineStore('locale', () => {
  // çŠ¶æ€
  const currentLocale = ref<SupportedLocale>(getCurrentLocale())

  // è®¡ç®—å±æ€§
  const localeInfo = computed(() => supportedLocales.find(item => item.key === currentLocale.value))

  const isChineseLang = computed(() => currentLocale.value.startsWith('zh'))

  // æ“ä½œ
  const changeLocale = async (locale: SupportedLocale) => {
    if (currentLocale.value === locale) return

    try {
      setLocale(locale)
      currentLocale.value = locale
    } catch (error) {
      console.error('Failed to change locale:', error)
      throw error
    }
  }

  const toggleLocale = () => {
    const currentIndex = supportedLocales.findIndex(item => item.key === currentLocale.value)
    const nextIndex = (currentIndex + 1) % supportedLocales.length
    const nextLocale = supportedLocales[nextIndex].key
    changeLocale(nextLocale)
  }

  return {
    // çŠ¶æ€
    currentLocale,

    // è®¡ç®—å±æ€§
    localeInfo,
    isChineseLang,
    supportedLocales,

    // æ“ä½œ
    changeLocale,
    toggleLocale,
  }
})
```

## ğŸ§© ç»„ä»¶ä¸­çš„å›½é™…åŒ–ä½¿ç”¨

### åŸºç¡€ä½¿ç”¨

```vue
<!-- UserProfile.vue -->
<template>
  <div class="user-profile">
    <h1>{{ $t('user.profile.title') }}</h1>

    <!-- åŸºç¡€æ–‡æœ¬ç¿»è¯‘ -->
    <div class="profile-item">
      <label>{{ $t('user.profile.username') }}</label>
      <span>{{ user.username }}</span>
    </div>

    <!-- å¸¦å‚æ•°çš„ç¿»è¯‘ -->
    <div class="profile-item">
      <label>{{ $t('user.profile.lastLogin') }}</label>
      <span>{{ $d(user.lastLoginTime, 'datetime') }}</span>
    </div>

    <!-- å¤æ•°å½¢å¼ -->
    <div class="stats">
      {{ $t('user.management.userCount', { count: userCount }, userCount) }}
    </div>

    <!-- çŠ¶æ€ç¿»è¯‘ -->
    <div class="status">
      <span :class="statusClass">
        {{ $t(`user.status.${user.status}`) }}
      </span>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useI18n } from 'vue-i18n'
import type { User } from '@/types/user'

interface Props {
  user: User
  userCount: number
}

const props = defineProps<Props>()
const { t: $t, d: $d } = useI18n()

// è®¡ç®—çŠ¶æ€æ ·å¼
const statusClass = computed(() => ({
  'status-active': props.user.status === 'active',
  'status-inactive': props.user.status === 'inactive',
}))
</script>
```

### è¯­è¨€åˆ‡æ¢ç»„ä»¶

```vue
<!-- LanguageSwitch.vue -->
<template>
  <div class="language-switch">
    <button
      v-for="locale in supportedLocales"
      :key="locale.key"
      :class="['locale-btn', { active: currentLocale === locale.key }]"
      @click="switchLocale(locale.key)"
    >
      <span class="flag">{{ locale.flag }}</span>
      <span class="name">{{ locale.name }}</span>
    </button>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useLocale } from '@/hooks/modules/useLocale'

const { currentLocale, supportedLocales, switchLocale } = useLocale()
</script>

<style scoped>
.language-switch {
  display: flex;
  gap: 8px;
}

.locale-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: transparent;
  cursor: pointer;
  transition: all 0.2s;
}

.locale-btn:hover {
  background: var(--hover-bg);
}

.locale-btn.active {
  background: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.flag {
  font-size: 16px;
}

.name {
  font-size: 14px;
}
</style>
```

### è·¯ç”±æ ‡é¢˜å›½é™…åŒ–

```typescript
// src/router/utils/helper.ts
import { t } from '@/locales'

export function generateRouteTitle(routeTitle?: string): string {
  if (!routeTitle) return ''

  // å¦‚æœæ˜¯ç¿»è¯‘é”®ï¼Œè¿›è¡Œç¿»è¯‘
  if (routeTitle.includes('.')) {
    return t(routeTitle)
  }

  // å¦åˆ™ç›´æ¥è¿”å›
  return routeTitle
}

// åœ¨è·¯ç”±é…ç½®ä¸­ä½¿ç”¨
export const routes = [
  {
    path: '/dashboard',
    name: 'Dashboard',
    component: () => import('@/views/dashboard/index.vue'),
    meta: {
      title: 'router.dashboard.dashboard', // ä½¿ç”¨ç¿»è¯‘é”®
      requiresAuth: true,
    },
  },
  {
    path: '/user',
    name: 'User',
    component: () => import('@/views/user/index.vue'),
    meta: {
      title: 'user.management.title',
      requiresAuth: true,
    },
  },
]
```

## ğŸ”§ i18n Ally æ’ä»¶é…ç½®

### VSCode/Cursor è®¾ç½®

```json
// .vscode/settings.json æˆ– .cursor/settings.json
{
  // i18n Ally å›½é™…åŒ–æ’ä»¶é…ç½®
  "i18n-ally.localesPaths": ["src/locales/lang"],
  "i18n-ally.keystyle": "nested",
  "i18n-ally.sortKeys": true,
  "i18n-ally.namespace": false,
  "i18n-ally.pathMatcher": "{locale}.{ext}",
  "i18n-ally.enabledParsers": ["ts", "js"],
  "i18n-ally.sourceLanguage": "zh-CN",
  "i18n-ally.displayLanguage": "zh-CN",
  "i18n-ally.enabledFrameworks": ["vue", "vue-i18n"],
  "i18n-ally.extract.keyPrefix": "",
  "i18n-ally.extract.keyMaxLength": 100,
  "i18n-ally.extract.parsers.html.attributes": ["alt", "title", "placeholder"],
  "i18n-ally.extract.parsers.html.ignoredTags": ["script", "style"],
  "i18n-ally.review.enabled": true,
  "i18n-ally.review.gutters": true,
  "i18n-ally.dirStructure": "dir",
  "i18n-ally.annotationInPlace": true,
  "i18n-ally.annotationMaxLength": 50,
  "i18n-ally.editor.preferEditor": true,
  "i18n-ally.readonly": false,
  "i18n-ally.usage.scanningDirs": ["src"],
  "i18n-ally.usage.ignoredFiles": ["**/*.d.ts", "**/node_modules/**", "**/dist/**"]
}
```

### ä¸“ç”¨é…ç½®æ–‡ä»¶

```typescript
// i18n-ally.config.ts
export default {
  // è¯­è¨€æ–‡ä»¶ä½ç½®
  localesPaths: ['src/locales/lang'],

  // æ”¯æŒçš„è¯­è¨€
  sourceLanguage: 'zh-CN',
  displayLanguage: 'zh-CN',

  // æ–‡ä»¶ç»“æ„é…ç½®
  pathMatcher: '{locale}.{ext}',
  dirStructure: 'dir',
  namespace: false,

  // è§£æå™¨é…ç½®
  enabledParsers: ['ts', 'js'],
  enabledFrameworks: ['vue', 'vue-i18n'],

  // é”®å€¼é…ç½®
  keystyle: 'nested',
  sortKeys: true,

  // æå–é…ç½®
  extract: {
    keyPrefix: '',
    keyMaxLength: 100,
    parsers: {
      html: {
        attributes: ['alt', 'title', 'placeholder', 'aria-label'],
        ignoredTags: ['script', 'style'],
      },
      vue: {
        attributes: ['v-text', 'v-html'],
        directives: ['t', 'tc', 'te', 'd', 'n'],
      },
    },
  },

  // é‡æ„æ¨¡æ¿
  refactor: {
    templates: [
      {
        name: 'vue-i18n-template',
        find: "\\$t\\('([^']*)'\\)",
        replace: "{{ \\$t('$1') }}",
      },
      {
        name: 'vue-i18n-script',
        find: "this\\.\\$t\\('([^']*)'\\)",
        replace: "t('$1')",
      },
    ],
  },

  // å®¡æŸ¥é…ç½®
  review: {
    enabled: true,
    gutters: true,
  },

  // ç¼–è¾‘å™¨é…ç½®
  editor: {
    preferEditor: true,
    annotationInPlace: true,
    annotationMaxLength: 50,
  },

  // ä½¿ç”¨æƒ…å†µåˆ†æ
  usage: {
    scanningDirs: ['src'],
    ignoredFiles: ['**/*.d.ts', '**/node_modules/**', '**/dist/**', '**/.git/**', '**/coverage/**'],
  },

  // åªè¯»æ¨¡å¼ï¼ˆè®¾ç½®ä¸ºfalseä»¥å…è®¸ç¼–è¾‘ï¼‰
  readonly: false,
}
```

## ğŸŒŸ æœ€ä½³å®è·µ

### ç¿»è¯‘é”®å‘½åè§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨æ¨¡å—åŒ–çš„é”®å
$t('user.profile.title') // ç”¨æˆ·.èµ„æ–™.æ ‡é¢˜
$t('auth.login.username') // è®¤è¯.ç™»å½•.ç”¨æˆ·å
$t('common.actions.confirm') // é€šç”¨.æ“ä½œ.ç¡®è®¤
$t('dashboard.statistics.totalUsers') // ä»ªè¡¨ç›˜.ç»Ÿè®¡.æ€»ç”¨æˆ·æ•°

// âŒ é”™è¯¯ï¼šè¿‡äºç®€å•æˆ–æ··ä¹±çš„é”®å
$t('title') // ä¸æ˜ç¡®
$t('userProfilePageTitle') // è¿‡äºå†—é•¿
$t('user_profile_title') // ä¸‹åˆ’çº¿æ ¼å¼ä¸ä¸€è‡´
```

### å‚æ•°åŒ–ç¿»è¯‘

```typescript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨å‚æ•°åŒ–ç¿»è¯‘
const message = $t('user.management.deleteConfirm', {
  username: user.username,
})

// è¯­è¨€æ–‡ä»¶ä¸­ï¼š
// zh-CN: "ç¡®å®šè¦åˆ é™¤ç”¨æˆ· {username} å—ï¼Ÿ"
// en-US: "Are you sure to delete user {username}?"

// âœ… æ­£ç¡®ï¼šå¤æ•°å½¢å¼å¤„ç†
const userCount = $t('common.table.total', { total: count })

// è¯­è¨€æ–‡ä»¶ä¸­ï¼š
// zh-CN: "å…± {total} æ¡"
// en-US: "Total {total} items"
```

### æ¡ä»¶ç¿»è¯‘

```vue
<template>
  <!-- âœ… æ­£ç¡®ï¼šæ ¹æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒæ–‡æœ¬ -->
  <span :class="`status-${user.status}`">
    {{ $t(`user.status.${user.status}`) }}
  </span>

  <!-- âœ… æ­£ç¡®ï¼šæ¡ä»¶æ€§æ˜¾ç¤ºç¿»è¯‘æ–‡æœ¬ -->
  <div v-if="hasError">
    {{ $t('common.status.error') }}
  </div>
  <div v-else>
    {{ $t('common.status.success') }}
  </div>
</template>
```

### æ€§èƒ½ä¼˜åŒ–

```typescript
// âœ… æ­£ç¡®ï¼šç¼“å­˜ç¿»è¯‘ç»“æœ
const { $t } = useLocale()
const cachedTranslations = computed(() => ({
  title: $t('user.profile.title'),
  username: $t('user.profile.username'),
  email: $t('user.profile.email'),
}))

// âœ… æ­£ç¡®ï¼šé¿å…åœ¨å¾ªç¯ä¸­è°ƒç”¨ç¿»è¯‘
const statusOptions = computed(() => [
  { value: 'active', label: $t('user.status.active') },
  { value: 'inactive', label: $t('user.status.inactive') },
  { value: 'banned', label: $t('user.status.banned') },
])
```

### ç±»å‹å®‰å…¨

```typescript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ç±»å‹åŒ–çš„ç¿»è¯‘é”®
type TranslationKey =
  | 'common.actions.confirm'
  | 'common.actions.cancel'
  | 'user.profile.title'
  | 'user.status.active'

const safeT = (key: TranslationKey, params?: Record<string, any>) => {
  return $t(key, params)
}

// ä½¿ç”¨æ—¶ä¼šæœ‰ç±»å‹æç¤ºå’Œæ£€æŸ¥
const title = safeT('user.profile.title') // âœ… æ­£ç¡®
const invalid = safeT('invalid.key') // âŒ ç±»å‹é”™è¯¯
```

### æµ‹è¯•å›½é™…åŒ–

```typescript
// tests/i18n.test.ts
import { describe, it, expect } from 'vitest'
import { createI18n } from 'vue-i18n'
import { messages } from '@/locales'

describe('i18n', () => {
  it('should have all required translations', () => {
    const i18n = createI18n({
      legacy: false,
      locale: 'zh-CN',
      messages,
    })

    // æµ‹è¯•åŸºæœ¬ç¿»è¯‘
    expect(i18n.global.t('common.actions.confirm')).toBe('ç¡®è®¤')
    expect(i18n.global.t('common.actions.cancel')).toBe('å–æ¶ˆ')
  })

  it('should handle parameters correctly', () => {
    const i18n = createI18n({
      legacy: false,
      locale: 'zh-CN',
      messages,
    })

    const result = i18n.global.t('common.table.total', { total: 100 })
    expect(result).toBe('å…± 100 æ¡')
  })

  it('should fallback to default language', () => {
    const i18n = createI18n({
      legacy: false,
      locale: 'invalid-locale',
      fallbackLocale: 'zh-CN',
      messages,
    })

    expect(i18n.global.t('common.actions.confirm')).toBe('ç¡®è®¤')
  })
})
```

éµå¾ªè¿™äº›å›½é™…åŒ–è§„èŒƒï¼Œç¡®ä¿CC-Adminé¡¹ç›®èƒ½å¤Ÿæ”¯æŒå¤šè¯­è¨€ï¼Œæä¾›è‰¯å¥½çš„å›½é™…åŒ–ç”¨æˆ·ä½“éªŒã€‚æ‰€æœ‰ç¿»è¯‘é”®éƒ½åº”è¯¥éµå¾ªæ¨¡å—åŒ–çš„å‘½åè§„èŒƒï¼Œå¹¶ä¸”ä¿æŒæ‰€æœ‰è¯­è¨€åŒ…çš„ç»“æ„ä¸€è‡´æ€§ã€‚

```

```
